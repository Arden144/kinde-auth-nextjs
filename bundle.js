"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e);const o={user:null,isAuthenticated:!1,isLoading:!0,checkSession:null},s=()=>{throw new Error("Oops! Seems like you forgot to wrap your app in <KindeProvider>.")},i=e.createContext({...o,user:s,isLoading:s,isAuthenticated:s,checkSession:s});require("crypto"),require("cookie");exports.AuthContext=i,exports.KindeProvider=({children:t,initialUser:s})=>{const[n,a]=e.useState({...o,user:s,isLoading:!s,isAuthenticated:!!s}),u="/api/auth/me",c=e.useCallback((async()=>{try{const e=await(async e=>{let t;try{t=await fetch(e)}catch{throw new RequestError(0)}if(t.ok)return t.json();t.status})(u);a((t=>({...t,user:e,error:void 0})))}catch(e){a((t=>({...t,error:e})))}}),[u]);e.useEffect((()=>{n.user||(async()=>{await c(),a((e=>({...e,isLoading:!1})))})()}),[n.user]);const{user:l,error:d,isLoading:h,isAuthenticated:p}=n;return r.default.createElement(i.Provider,{value:{user:l,error:d,isLoading:h,isAuthenticated:p}},t)},exports.handleAuth=()=>function(e,t){let{query:{kindeAuth:r}}=e;r=Array.isArray(r)?r[0]:r,"login"===r&&((e,t)=>{console.log("log in"),console.log("req",e),console.log("res",t),t.status(200).json({name:"John Doe"})})(e,t),t.status(404).end()},exports.useAuth=()=>e.useContext(i);
