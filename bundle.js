"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e);const o={user:null,isAuthenticated:!1,isLoading:!0,checkSession:null},s=()=>{throw new Error("Oops! Seems like you forgot to wrap your app in <KindeProvider>.")},n=e.createContext({...o,user:s,isLoading:s,isAuthenticated:s,checkSession:s});require("crypto"),require("cookie");exports.AuthContext=n,exports.KindeProvider=({children:t,initialUser:s})=>{const[i,u]=e.useState({...o,user:s,isLoading:!s,isAuthenticated:!!s}),a="/api/auth/me",c=e.useCallback((async()=>{try{const e=await(async e=>{let t;try{t=await fetch(e)}catch{throw new RequestError(0)}if(t.ok)return t.json();t.status})(a);u((t=>({...t,user:e,error:void 0})))}catch(e){u((t=>({...t,error:e})))}}),[a]);e.useEffect((()=>{i.user||(async()=>{await c(),u((e=>({...e,isLoading:!1})))})()}),[i.user]);const{user:l,error:d,isLoading:h,isAuthenticated:f}=i;return r.default.createElement(n.Provider,{value:{user:l,error:d,isLoading:h,isAuthenticated:f}},t)},exports.handleAuth=()=>function(e,t){let{query:{kindeAuth:r}}=e;if("login"===r)return((e,t)=>{console.log("log in"),console.log("req",e),console.log("res",t),t.status(200).json({name:"John Doe"})})(e,t);t.status(404).end()},exports.useAuth=()=>e.useContext(n);
