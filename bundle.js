"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e);const o={user:null,isAuthenticated:!1,isLoading:!0,checkSession:null},s=()=>{throw new Error("Oops! Seems like you forgot to wrap your app in <KindeProvider>.")},i=e.createContext({...o,user:s,isLoading:s,isAuthenticated:s,checkSession:s});require("crypto"),require("cookie");exports.AuthContext=i,exports.KindeProvider=({children:t,initialUser:s})=>{const[n,u]=e.useState({...o,user:s,isLoading:!s,isAuthenticated:!!s}),a="/api/auth/me",c=e.useCallback((async()=>{try{const e=await(async e=>{let t;try{t=await fetch(e)}catch{throw new RequestError(0)}if(t.ok)return t.json();t.status})(a);u((t=>({...t,user:e,error:void 0})))}catch(e){u((t=>({...t,error:e})))}}),[a]);e.useEffect((()=>{n.user||(async()=>{await c(),u((e=>({...e,isLoading:!1})))})()}),[n.user]);const{user:l,error:d,isLoading:h,isAuthenticated:f}=n;return r.default.createElement(i.Provider,{value:{user:l,error:d,isLoading:h,isAuthenticated:f}},t)},exports.handleAuth=function(e,t){const{kindeAuth:r}=e.query;if("login"===r)return((e,t)=>{console.log("log in"),console.log("req",e),console.log("res",t)})(e,t)},exports.useAuth=()=>e.useContext(i);
